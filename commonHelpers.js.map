{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst list = document.querySelector(\".list\");\nconst formSearch = document.querySelector(\".form-search\");\nconst error = document.querySelector(\".error\");\nconst selected = document.querySelector(\"#selected\")\nerror.style.display = \"none\";\nlet keywords;\nlet selectedForm;\nlet keyword;\nlet key;\nlet categories;\n\nformSearch.addEventListener(\"submit\", handleSubmit);\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n\n   const { search } = event.currentTarget.elements;\n   key = {\n    keywords: search.value,\n   }\n   localStorage.setItem(\"SaveFilters\", JSON.stringify(key.keywords) || null);\n//    localStorage.setItem(\"savetext\", key.keywords);\n//    console.log(searchForm)\n   productsRender()\n}\n\n// formSearch.elements.search.value = localStorage.getItem(\"savetext\");\n\nproductsRender()\n\nselected.addEventListener(\"change\", handleChange);\n\nfunction handleChange(event) {\n   const selecteds = event.target.value;\n   selectedForm = selecteds;\n    console.log(selected.value)\n    categories = {\n        selectedForm: selecteds,\n    }\n   localStorage.setItem(\"SaveCategpries\", JSON.stringify(categories.selectedForm) || null);\n//    localStorage.setItem(\"saveselected\", categories.selectedForm);\n//    console.log(categories.selectedForm)\n    productsRender()\n}\n\n// formSearch.elements.selecteds.value = localStorage.getItem(\"saveselected\");\n\nasync function productsRender() {\n    try {\n        const data = await productsApi();\n        // const res = await categoriesApi();\n        // console.log(data.results)\n        if (data.results.length === 0) {\n            error.style.display = \"block\"\n        } else {\n            error.style.display = \"none\"\n        }\n        // console.log(data.results)\n        // list.innerHTML = createmarkup(data.results);\n        return list.innerHTML = createmarkup(data.results);\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nasync function productsApi(page = 1, limit = 6) {\n    keyword = keywords || null;\n    let category = selectedForm || null;\n    // const params =new URLSearchParams({\n    //     // keyword: searchForm,\n    //     keyword,\n    //     category,\n    //     page: 1,\n    // }) \n    const BASE_URL = `https://food-boutique.b.goit.study/api/products`;\n    // const SRC = `keyword=`\n    try {\n    const data = await axios(`${BASE_URL}?`, {\n        params: {\n            keyword: JSON.parse(localStorage.getItem(\"SaveFilters\")),\n            category: JSON.parse(localStorage.getItem(\"SaveCategpries\")),\n            page: 1,\n            limit: 6,\n        }\n    });\n    // let filterSave = {\n    //     keyword, \n    //     category, \n    //     page, \n    //     limit,\n    // }\n    // console.log(category)\n    // console.log(data)\n    // console.log(data.data)\n    return data.data;\n    } catch (error) {\n        console.log(error)\n    }\n};\n\nasync function categoriesRender() {\n    try {\n        const data = await categoriesApi();\n        const category = data.map((data) => {\n            return `<option value=\"${data}\">${data}</option>`;\n        }).join(\"\");\n        // console.log(category);\n        selected.insertAdjacentHTML(\"beforeend\", category)\n        // return list.innerHTML = createmarkup(data.results);\n    } catch (error) {\n        console.log(error);\n    }\n}\n\ncategoriesRender()\n\n\nasync function categoriesApi(page = 1) {\n    const category = null;\n    try {\n    const data = await axios(`https://food-boutique.b.goit.study/api/products/categories`, {\n        params: {\n            category: selectedForm,\n        }\n    });\n    // console.log(data.data)\n    return data.data;\n    } catch (error) {\n        console.log(error)\n    }\n};\n\ncategoriesApi()\n\nfunction createmarkup(arr) {\n    return arr.map(({name, img, category, price}) => {\n      return  `\n        <ul class=\"list-product\">\n        <li class=\"item-product\">\n        <img class=\"img-product\" src=\"${img}\" width=\"400\" height=\"200\">\n        <h2 class=\"caption-product\">${name}</h2>\n        <h3>${category}</h3>\n        <p class=\"price-product\">Price:${price}</p>\n        </li>\n        </ul>\n        `\n    }).join(\"\");\n}\n\n// productsApi()"],"names":["list","formSearch","error","selected","selectedForm","key","categories","handleSubmit","event","search","productsRender","handleChange","selecteds","data","productsApi","createmarkup","page","limit","BASE_URL","axios","categoriesRender","category","categoriesApi","arr","name","img","price"],"mappings":"svBAEA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAW,SAAS,cAAc,WAAW,EACnDD,EAAM,MAAM,QAAU,OAEtB,IAAIE,EAEAC,EACAC,EAEJL,EAAW,iBAAiB,SAAUM,CAAY,EAElD,SAASA,EAAaC,EAAO,CACzBA,EAAM,eAAc,EAErB,KAAM,CAAE,OAAAC,CAAQ,EAAGD,EAAM,cAAc,SACvCH,EAAM,CACL,SAAUI,EAAO,KACjB,EACD,aAAa,QAAQ,cAAe,KAAK,UAAUJ,EAAI,QAAQ,GAAK,IAAI,EAGxEK,EAAgB,CACnB,CAIAA,EAAgB,EAEhBP,EAAS,iBAAiB,SAAUQ,CAAY,EAEhD,SAASA,EAAaH,EAAO,CAC1B,MAAMI,EAAYJ,EAAM,OAAO,MAC/BJ,EAAeQ,EACd,QAAQ,IAAIT,EAAS,KAAK,EAC1BG,EAAa,CACT,aAAcM,CACjB,EACF,aAAa,QAAQ,iBAAkB,KAAK,UAAUN,EAAW,YAAY,GAAK,IAAI,EAGrFI,EAAgB,CACpB,CAIA,eAAeA,GAAiB,CAC5B,GAAI,CACA,MAAMG,EAAO,MAAMC,IAGnB,OAAID,EAAK,QAAQ,SAAW,EACxBX,EAAM,MAAM,QAAU,QAEtBA,EAAM,MAAM,QAAU,OAInBF,EAAK,UAAYe,EAAaF,EAAK,OAAO,CACpD,OAAQX,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CACL,CAEA,eAAeY,EAAYE,EAAO,EAAGC,EAAQ,EAAG,CAS5C,MAAMC,EAAW,kDAEjB,GAAI,CAkBJ,OAjBa,MAAMC,EAAM,GAAGD,KAAa,CACrC,OAAQ,CACJ,QAAS,KAAK,MAAM,aAAa,QAAQ,aAAa,CAAC,EACvD,SAAU,KAAK,MAAM,aAAa,QAAQ,gBAAgB,CAAC,EAC3D,KAAM,EACN,MAAO,CACV,CACT,CAAK,GAUW,IACX,OAAQhB,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CACL,CAEA,eAAekB,GAAmB,CAC9B,GAAI,CAEA,MAAMC,GADO,MAAMC,KACG,IAAKT,GAChB,kBAAkBA,MAASA,YACrC,EAAE,KAAK,EAAE,EAEVV,EAAS,mBAAmB,YAAakB,CAAQ,CAEpD,OAAQnB,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CACL,CAEAkB,EAAkB,EAGlB,eAAeE,EAAcN,EAAO,EAAG,CAEnC,GAAI,CAOJ,OANa,MAAMG,EAAM,6DAA8D,CACnF,OAAQ,CACJ,SAAUf,CACb,CACT,CAAK,GAEW,IACX,OAAQF,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CACL,CAEAoB,EAAe,EAEf,SAASP,EAAaQ,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAC,KAAAC,EAAM,IAAAC,EAAK,SAAAJ,EAAU,MAAAK,CAAK,IACjC;AAAA;AAAA;AAAA,wCAG0BD;AAAA,sCACFD;AAAA,cACxBH;AAAA,yCAC2BK;AAAA;AAAA;AAAA,SAIpC,EAAE,KAAK,EAAE,CACd"}