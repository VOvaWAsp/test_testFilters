{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst list = document.querySelector(\".list\");\nconst formSearch = document.querySelector(\".form-search\");\nconst error = document.querySelector(\".error\");\nconst selected = document.querySelector(\"#selected\")\nerror.style.display = \"none\";\nlet searchForm;\nlet selectedForm;\n\nformSearch.addEventListener(\"submit\", handleSubmit);\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n\n   const { search } = event.currentTarget.elements;\n   searchForm = search.value;\n//    console.log(search)\n   productsRender()\n}\nproductsRender()\n\nselected.addEventListener(\"change\", handleChange);\n\nfunction handleChange(event) {\n   const selecteds = event.target.value;\n   selectedForm = selecteds;\n    console.log(selected.value)\n    productsRender()\n}\n\nasync function productsRender() {\n    try {\n        const data = await productsApi();\n        // const res = await categoriesApi();\n        console.log(data.results)\n        if (data.results.length === 0) {\n            error.style.display = \"block\"\n        }\n        // console.log(data.results)\n        // list.innerHTML = createmarkup(data.results);\n        return list.innerHTML = createmarkup(data.results);\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nasync function productsApi(page = 1) {\n    const keyword = searchForm;\n    let category = selectedForm;\n    // const params = URLSearchParams({\n    //     keyword: searchForm,\n    // }) \n    const BASE_URL = `https://food-boutique.b.goit.study/api/products`;\n    const SRC = `keyword=`\n    try {\n    const data = await axios(`${BASE_URL}?`, {\n        params: {\n            keyword,\n            category,\n            page: 2,\n        }\n    });\n    console.log(category)\n    console.log(data)\n    console.log(data.data)\n    return data.data;\n    } catch (error) {\n        console.log(error)\n    }\n};\n\nasync function categoriesRender() {\n    try {\n        const data = await categoriesApi();\n        const category = data.map((data) => {\n            return `<option value=\"${data}\">${data}</option>`;\n        }).join(\"\");\n        // console.log(category);\n        selected.insertAdjacentHTML(\"beforeend\", category)\n        // return list.innerHTML = createmarkup(data.results);\n    } catch (error) {\n        console.log(error);\n    }\n}\n\ncategoriesRender()\n\n\nasync function categoriesApi(page = 1) {\n    const category = null;\n    try {\n    const data = await axios(`https://food-boutique.b.goit.study/api/products/categories`, {\n        params: {\n            category: selectedForm,\n        }\n    });\n    // console.log(data.data)\n    return data.data;\n    } catch (error) {\n        console.log(error)\n    }\n};\n\ncategoriesApi()\n\nfunction createmarkup(arr) {\n    return arr.map(({name, img, category, price}) => {\n      return  `\n        <ul class=\"list-product\">\n        <li class=\"item-product\">\n        <img class=\"img-product\" src=\"${img}\" width=\"400\" height=\"200\">\n        <h2 class=\"caption-product\">${name}</h2>\n        <h3>${category}</h3>\n        <p class=\"price-product\">Price:${price}</p>\n        </li>\n        </ul>\n        `\n    }).join(\"\");\n}\n\n// productsApi()"],"names":["list","formSearch","error","selected","searchForm","selectedForm","handleSubmit","event","search","productsRender","handleChange","data","productsApi","createmarkup","page","keyword","category","BASE_URL","axios","categoriesRender","categoriesApi","arr","name","img","price"],"mappings":"svBAEA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAW,SAAS,cAAc,WAAW,EACnDD,EAAM,MAAM,QAAU,OACtB,IAAIE,EACAC,EAEJJ,EAAW,iBAAiB,SAAUK,CAAY,EAElD,SAASA,EAAaC,EAAO,CACzBA,EAAM,eAAc,EAErB,KAAM,CAAE,OAAAC,CAAQ,EAAGD,EAAM,cAAc,SACvCH,EAAaI,EAAO,MAEpBC,EAAgB,CACnB,CACAA,EAAgB,EAEhBN,EAAS,iBAAiB,SAAUO,CAAY,EAEhD,SAASA,EAAaH,EAAO,CAE1BF,EADkBE,EAAM,OAAO,MAE9B,QAAQ,IAAIJ,EAAS,KAAK,EAC1BM,EAAgB,CACpB,CAEA,eAAeA,GAAiB,CAC5B,GAAI,CACA,MAAME,EAAO,MAAMC,IAEnB,eAAQ,IAAID,EAAK,OAAO,EACpBA,EAAK,QAAQ,SAAW,IACxBT,EAAM,MAAM,QAAU,SAInBF,EAAK,UAAYa,EAAaF,EAAK,OAAO,CACpD,OAAQT,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CACL,CAEA,eAAeU,EAAYE,EAAO,EAAG,CACjC,MAAMC,EAAUX,EAChB,IAAIY,EAAWX,EAIf,MAAMY,EAAW,kDAEjB,GAAI,CACJ,MAAMN,EAAO,MAAMO,EAAM,GAAGD,KAAa,CACrC,OAAQ,CACJ,QAAAF,EACA,SAAAC,EACA,KAAM,CACT,CACT,CAAK,EACD,eAAQ,IAAIA,CAAQ,EACpB,QAAQ,IAAIL,CAAI,EAChB,QAAQ,IAAIA,EAAK,IAAI,EACdA,EAAK,IACX,OAAQT,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CACL,CAEA,eAAeiB,GAAmB,CAC9B,GAAI,CAEA,MAAMH,GADO,MAAMI,KACG,IAAKT,GAChB,kBAAkBA,MAASA,YACrC,EAAE,KAAK,EAAE,EAEVR,EAAS,mBAAmB,YAAaa,CAAQ,CAEpD,OAAQd,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CACL,CAEAiB,EAAkB,EAGlB,eAAeC,EAAcN,EAAO,EAAG,CAEnC,GAAI,CAOJ,OANa,MAAMI,EAAM,6DAA8D,CACnF,OAAQ,CACJ,SAAUb,CACb,CACT,CAAK,GAEW,IACX,OAAQH,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CACL,CAEAkB,EAAe,EAEf,SAASP,EAAaQ,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAC,KAAAC,EAAM,IAAAC,EAAK,SAAAP,EAAU,MAAAQ,CAAK,IACjC;AAAA;AAAA;AAAA,wCAG0BD;AAAA,sCACFD;AAAA,cACxBN;AAAA,yCAC2BQ;AAAA;AAAA;AAAA,SAIpC,EAAE,KAAK,EAAE,CACd"}